import{r as c}from"./index-Dm8qopDP.js";import{j as x}from"./jsx-runtime-CmtfZKef.js";import{u as A}from"./index-B1McFu0M.js";import{u as M}from"./index-LbsB4HyV.js";function z(e,n=[]){let t=[];function r(f,a){const u=c.createContext(a),s=t.length;t=[...t,a];const i=m=>{var g;const{scope:d,children:l,...N}=m,S=((g=d==null?void 0:d[e])==null?void 0:g[s])||u,h=c.useMemo(()=>N,Object.values(N));return x.jsx(S.Provider,{value:h,children:l})};i.displayName=f+"Provider";function p(m,d){var S;const l=((S=d==null?void 0:d[e])==null?void 0:S[s])||u,N=c.useContext(l);if(N)return N;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${f}\``)}return[i,p]}const o=()=>{const f=t.map(a=>c.createContext(a));return function(u){const s=(u==null?void 0:u[e])||f;return c.useMemo(()=>({[`__scope${e}`]:{...u,[e]:s}}),[u,s])}};return o.scopeName=e,[r,O(o,...n)]}function O(...e){const n=e[0];if(e.length===1)return n;const t=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(f){const a=r.reduce((u,{useScope:s,scopeName:i})=>{const m=s(f)[`__scope${i}`];return{...u,...m}},{});return c.useMemo(()=>({[`__scope${n.scopeName}`]:a}),[a])}};return t.scopeName=n.scopeName,t}function I(e){const n=c.useRef({value:e,previous:e});return c.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}function U(e){const[n,t]=c.useState(void 0);return A(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const f=o[0];let a,u;if("borderBoxSize"in f){const s=f.borderBoxSize,i=Array.isArray(s)?s[0]:s;a=i.inlineSize,u=i.blockSize}else a=e.offsetWidth,u=e.offsetHeight;t({width:a,height:u})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else t(void 0)},[e]),n}function P(e,n){return c.useReducer((t,r)=>n[t][r]??t,e)}var b=e=>{const{present:n,children:t}=e,r=E(n),o=typeof t=="function"?t({present:r.isPresent}):c.Children.only(t),f=M(r.ref,w(o));return typeof t=="function"||r.isPresent?c.cloneElement(o,{ref:f}):null};b.displayName="Presence";function E(e){const[n,t]=c.useState(),r=c.useRef(null),o=c.useRef(e),f=c.useRef("none"),a=e?"mounted":"unmounted",[u,s]=P(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const i=v(r.current);f.current=u==="mounted"?i:"none"},[u]),A(()=>{const i=r.current,p=o.current;if(p!==e){const d=f.current,l=v(i);e?s("MOUNT"):l==="none"||(i==null?void 0:i.display)==="none"?s("UNMOUNT"):s(p&&d!==l?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,s]),A(()=>{if(n){let i;const p=n.ownerDocument.defaultView??window,m=l=>{const S=v(r.current).includes(CSS.escape(l.animationName));if(l.target===n&&S&&(s("ANIMATION_END"),!o.current)){const h=n.style.animationFillMode;n.style.animationFillMode="forwards",i=p.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=h)})}},d=l=>{l.target===n&&(f.current=v(r.current))};return n.addEventListener("animationstart",d),n.addEventListener("animationcancel",m),n.addEventListener("animationend",m),()=>{p.clearTimeout(i),n.removeEventListener("animationstart",d),n.removeEventListener("animationcancel",m),n.removeEventListener("animationend",m)}}else s("ANIMATION_END")},[n,s]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:c.useCallback(i=>{r.current=i?getComputedStyle(i):null,t(i)},[])}}function v(e){return(e==null?void 0:e.animationName)||"none"}function w(e){var r,o;let n=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=(o=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:o.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}export{b as P,U as a,z as c,I as u};
